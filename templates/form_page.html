{% extends 'base.html'%}

{%block title%}


{%endblock%}

{%block body%}


<style>

table {
    counter-reset: tableCount;
    line-height: 20px;
}
tr {
height: 14px;
}
.counterCell:before {
    content: counter(tableCount);
    counter-increment: tableCount;
}
<!--ul {list-style-type: decimal;}-->

.input1 {
  grid-area: input1;
  padding-left: 10px;
  background:#dce8d1;
}
.input2 {
  grid-area: input2;
  padding-left: 10px;
  background:#dce8d1;
}
.input3 {
  grid-area: input3;
  padding-left: 10px;
  background:#dce8d1;
}
.input4 {
  grid-area: input4;
  padding-left: 10px;
  background:#dce8d1;
}
.tab1 {
  grid-area: tab1;
  align-self: start;
}
.tab2 {
  grid-area: tab2;
  align-self: start;
}
.tab3 {
  grid-area: tab3;
  align-self: start;
}

.container {
  display: grid;
  width: auto;
  margin-left: 10px;
  gap: 10px 10px;
  grid-template-columns: 400px 900px;
  grid-template-rows: auto;
  grid-template-areas:
  "input4 input4"
    "input1 tab1"
    "input2 tab2"
    "input3 tab3";

}
label {
  width:180px;
  display: inline-block;
}
* {
  font-family: Arial, Helvetica, sans-serif;
}
</style>


<ul class="nav nav-tabs justify-content-center nav-fill" id="myTab" role="tablist">
  <li class="nav-item" role="presentation">
    <a class="nav-link active" id="form" data-bs-toggle="tab" data-bs-target="#Entry form" type="button" role="tab" aria-controls="Entry form" aria-selected="true" href="/form_page">Entry form</a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" id="capex" data-bs-toggle="tab" data-bs-target="#capex" type="button" role="tab" aria-controls="capex" aria-selected="false" href="/capex">CAPEX</a>
  </li>
  <li class="nav-item" role="presentation">
    <a class="nav-link" id="efficiency" data-bs-toggle="tab" data-bs-target="#efficiency" type="button" role="tab" aria-controls="efficiency" aria-selected="false" href="/efficiency">Efficiency</a>
  </li>
    <li class="nav-item" role="presentation">
    <a class="nav-link" id="energy" data-bs-toggle="tab" data-bs-target="#energy" type="button" role="tab" aria-controls="energy" aria-selected="false" href="/energy">Energy Cost</a>
  </li>
    <li class="nav-item" role="presentation">
    <a class="nav-link" id="maintenance" data-bs-toggle="tab" data-bs-target="#maintenance" type="button" role="tab" aria-controls="maintenance" aria-selected="false" href="/maintenance">Maintenance Data</a>
  </li>
  </li>
    <li class="nav-item" role="presentation">
    <a class="nav-link" id="tco" data-bs-toggle="tab" data-bs-target="#tco" type="button" role="tab" aria-controls="tco" aria-selected="false" href="/tco">TCO</a>
  </li>
</ul>
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="form" role="tabpanel" aria-labelledby="Entry form"></div>
  <div class="tab-pane fade" id="capex" role="tabpanel" aria-labelledby="capex"></div>
  <div class="tab-pane fade" id="Efficiency" role="tabpanel" aria-labelledby="Efficiency"></div>
  <div class="tab-pane fade" id="energy" role="tabpanel" aria-labelledby="energy"></div>
  <div class="tab-pane fade" id="maintenance" role="tabpanel" aria-labelledby="maintenance"></div>
  <div class="tab-pane fade" id="tco" role="tabpanel" aria-labelledby="tco"></div>
</div>


<section class="container">
  <div class="input1">
      <fieldset>
    <legend align="left"><b>Unit data</b></legend>
    <form action="/form_page/add_component" method="POST" name="unit_data" autocomplete="off" id="unit_data">
    <div class="form-row">
    <div class="col-md-4 mb-3">


<table>
<tr>
  <td><label>Component name:</label></td>
 <td><input name=component list=components>

<datalist id=components>
 <label>
  or select from the list:
  <select name=component>
   <option value="">
      {% for a in component_list%}
       <option>{{a}}
      {% endfor %}
  </select>
 </label>
</datalist>
		</select></td>
    </tr>
    <tr>
   <td> <label for="component_price">Component price:</label></td>
   <td> <input type="number" name="component_price" id="component_price" placeholder="0" min=0 step="100" class="form-control form-control-sm" required>
   </td>
    </tr>
    <tr>
    <td><label for="comments">Comments:</label></td>
    <td><input type="text" name="comments" id="comments" class="form-control form-control-sm"></td>
</tr>
</table>
    <button type="submit" class="btn btn-primary btn-sm" onclick="document.forms.unit_data.submit()" style="width: 150px;">Add component</button>

        </form>
    </fieldset>
  </div>
  <div class="tab1">
           <!--{% for i in unit_components %}-->
            <!--<tr >-->
              <!--<td class="counterCell"></td>-->
              <!--<td>{{i.component}}</td>-->
              <!--<td>{{i.component_price}}</td>-->
                 <!--<td>{{i.comments}}</td>-->
                <!--<td><a class="btn btn-warning" href='/form_page/{{i.id}}/del'>Delete</a></td>-->
                 <!--</tr>-->
     <!--{% endfor %}-->
          <!--</tbody>-->
        <!--</table>-->
      <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Component</th>
                <th scope="col">Component price</th>
                <th scope="col">Comments</th>
                <th scope="col">Delete</th>
                 </tr>
          </thead>
     <tbody>
     {% for i in user_components %}
            <tr >
              <td class="counterCell"></td>
              <td>{{i[0]}}</td>
              <td>{{i[1]}}</td>
                 <td>{{i[2]}}</td>
                <td><a class="btn btn-warning btn-sm" href='/form_page/{{i[3]}}/del'>Delete</a></td>
                 </tr>
     {% endfor %}
          </tbody>
        </table>
  </div>
  <div class="input2">
    <fieldset>

    <legend align="left"><b>Maintenance</b></legend>
    <form action="/form_page/add_maintenance" method="POST" name="maintenance" autocomplete="off" id="maintenance">
    <div class="form-row">
    <div class="col-md-4 mb-3">
<table>
   <tr>
       <td><label>  Maintenance type:</label></td>
       <td><input name=main_type list=maintenances>

<datalist id=maintenances>
 <label>
  or select from the list:
  <select name=main_type>
   <option value="">
   <option>Annual Maintenance-Spares
   <option>Major Overhaul-Spares
   <option>Labor costs
  </select>
 </label>
</datalist></td>
   </tr>

<tr>
   <td><label for="period">Periodity:</label></td>
    <td><input type="number" name="period" id="period" placeholder="0" min=0 class="form-control form-control-sm" required>
    </td>
</tr>
<tr><td><label for="main_price">Maintenance price:</label></td>
    <td>        <input type="number" name="main_price" id="main_price" placeholder="0" min=0 class="form-control form-control-sm" required>
</td>
</tr>
<tr><td><label for="main_comments">Comments:</label>
</td>
<td>    <input type="text" name="main_comments" id="main_comments" class="form-control form-control-sm">
</td>
</tr>
<tr>	<td>
        <button type="submit" class="btn btn-primary btn-sm" onclick="document.forms.maintenance.submit()" style="width: 150px;">Add maintenance</button>

</td>
</tr>
</table>
    </form>

</fieldset>

  </div>
  <div class="tab2">
      <table class="table table-striped table-sm">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Maintenance type</th>
                <th scope="col">Period</th>
                <th scope="col">Price</th>
                <th scope="col">Comments</th>
                <th scope="col">Delete</th>
                 </tr>
          </thead>
     <tbody>
     <!--{% for j in maintenances %}-->
            <!--<tr height="15px">-->
              <!--<td class="counterCell"></td>-->
              <!--<td>{{j.main_type}}</td>-->
              <!--<td>{{j.period}}</td>-->
              <!--<td>{{j.main_price}}</td>-->
                <!--<td>{{j.main_comments}}</td>-->
              <!--<td><a class="btn btn-warning" href='/form_page/{{j.id}}/del_man'>Delete</a></td>-->
            <!--</tr>-->
     <!--{% endfor %}-->
     {% for j in user_maintenances %}
            <tr >
              <td class="counterCell"></td>
              <td>{{j[0]}}</td>
              <td>{{j[1]}}</td>
                 <td>{{j[2]}}</td>
                                 <td>{{j[3]}}</td>
                <td><a class="btn btn-warning btn-sm" href='/form_page/{{j[4]}}/del_man'>Delete</a></td>
                 </tr>
     {% endfor %}
     </tbody>
        </table>
  </div>
  <div class="input3">
    <fieldset id="points">
    <legend align="left"><b>Operating points</b></legend>
        <form action="/form_page/add_point" method="POST" name="oper_points">
    <div class="form-row">
    <div class="col-md-13 mb-3">
        <table>
            <tr>
                <td>    <label for="eff_driver">Efficiency - Driver, %</label></td>
                <td>    <div text-align="right"><input type="number" name="eff_driver" id="eff_driver" placeholder="0" min="0" max="100" class="form-control form-control-sm" required></div><p></p></td>
            </tr>
            <tr>
                <td>	   <label for="eff_other">Efficiency - others, %</label></td>
                <td>    <input type="number" name="eff_other" id="eff_other" placeholder="0" min="0" max="100" class="form-control form-control-sm" required><p></p></td>
            </tr>
            <tr>
                <td>            <label for="power_pump">Power Consumption - Main, kW</label></td>
                <td>   <input type="number" name="power_pump" id="power_pump" placeholder="0" min="0" class="form-control form-control-sm" required><p></p></td>
            </tr>
            <tr>
                <td>			   <label for="power_aux">Power Consumption - Auxilliaries, kW</label></td>
                <td>    <input type="number" name="power_aux" id="power_aux" placeholder="0" min="0" class="form-control form-control-sm" required><p></p></td>
            </tr>
<tr>
    <td>				   <label for="scenario">Operating Scenario, months / year</label></td>
    <td>    <input type="number" name="scenario" id="scenario" placeholder="0" min="0" max="12" step="1" class="form-control form-control-sm" required><p></p>
</td>
</tr>

<tr><td>	<button type="submit" class="btn btn-primary btn-sm" onclick="document.forms.oper_points.submit()">Add operating point</button>
</td><td></td></tr>
</table>
        </form>
</fieldset>
  </div>
  <div class="tab3">
      <table class="table table-striped table-sm">
          <thead>
          <th scope="col">#</th>
              <th scope="col">Efficiency - Driver, %</th>
                <th scope="col">Efficiency - Others, %</th>
                <th scope="col">Power Consumption-Main, kW</th>
                <th scope="col">Power Consumption-Auxilliaries, kW </th>
                <th scope="col">Operating Scenario, months / year</th>
                <th scope="col">Delete</th>
          </thead>
     <tbody>
     {% for k in user_points %}
            <tr >
              <td class="counterCell"></td>
              <td>{{k[0]}}</td>
              <td>{{k[1]}}</td>
               <td>{{k[2]}}</td>
               <td>{{k[3]}}
               <td>{{k[4]}}</td>
                <td><a class="btn btn-warning btn-sm" href='/form_page/{{k[5]}}/del_point'>Delete</a></td>
                 </tr>
     {% endfor %}
     <!--{% for k in points %}-->
            <!--<tr>-->
                <!--<td class="counterCell"></td>-->
                <!--<td> {{k.eff_driver}}</td>-->
                <!--<td> {{k.eff_other}}</td>-->
                <!--<td> {{k.power_pump}}</td>-->
                <!--<td> {{k.power_aux}}</td>-->
                <!--<td> {{k.scenario}}</td>-->
                <!--<td><a class="btn btn-warning" href='/form_page/{{k.id}}/del_point'>Delete</a></td>-->
            <!--</tr>-->
            <!--{% endfor %}-->
     </tbody>
        </table>
      <div style="color:red">{{message}}</div>
  </div>


<p></p>
     <div class="input4">
<!--<fieldset id="economy" style="width:1200px" Grid.ColumnSpan="2">-->

    <form action="/form_page/add_general" method="POST" name="general">
    <table>


<tr>
      <td><p><label for="project_name">Project name     </label></p>
    <input type="text" name="project_name" id="project_name" placeholder="{{project_name}}" class="form-control form-control-sm" >
 </td>
    <td><p><label for="unit_name">Unit name     </label></p>
    <input type="text" name="unit_name" id="unit_name" placeholder="{{unit_name}}" class="form-control form-control-sm" >
 </td>
    <td>
   <p><label for="energy_price">Energy Price,{{currency}}/kWh</label></p>
    <input type="number" name="energy_price" id="energy_price" placeholder="{{energy_price}}" min="0" step="0.01" class="form-control form-control-sm" required>
    </td>
    <td>
    <p><label for="annual_increase">Annual Price Increase, %</label> </p>
    <input type="number" name="annual_increase" id="annual_increase" placeholder="{{annual_increase}}" min=0 step="0.01" class="form-control form-control-sm" required>
    </td>
    <td>
    <p><label for="number_years">Number of years</label>  </p>
    <input type="number" name="number_years" id="number_years" placeholder="{{number_years}}" min=0 step="1" class="form-control form-control-sm" required>
    </td>
    <td><p><label for="currency">Currency</label></p>
     <select class="form-select form-select-sm" name="currency" aria-label=".form-select-sm example">
         <option value="{{currency}}" selected>{{currency}}</option>
  <option value="$">$</option>
  <option value="€">€</option>
  <option value="₽">₽</option>
</select>
    </td>
    <td>             <p></p><br>
   <button type="submit" class="btn btn-primary btn-sm" onclick="document.forms.general.submit()">Update data</button>
</td>
</tr>



</table><br>
        </form>
         <!--{% with messages = get_flashed_messages() %}-->
  {% if messages %}
    <ul class=flashes>
    {% for message in messages %}
      <li>{{ message }}</li>
    {% endfor %}
    </ul>
  {% endif %}
<!--{% endwith %}-->
</fieldset>
     </div>
<!--<div class="tab4">-->
      <!--<table class="table table-striped table-sm">-->
          <!--<thead>-->
          <!--<th scope="col">#</th>-->
              <!--<th scope="col">Unit name</th>-->
              <!--<th scope="col">Energy Price, EUR/kWh</th>-->
                <!--<th scope="col">Annual Price Increase, % </th>-->
                <!--<th scope="col"> Number of years</th>-->
          <!--</thead>-->
     <!--<tbody>{% for m in generals %}-->
            <!--<tr>-->
                <!--<td class="counterCell"></td>-->
                <!--<td> {{m.unit_name}} or {{unit_name}}</td>-->
                <!--<td> {{m.energy_price}} or {{energy_price}}</td>-->
                <!--<td> {{m.annual_increase}} or {{annual_increase}}</td>-->
                <!--<td> {{m.number_years}} or {{number_years}}</td>-->
            <!--</tr>-->
            <!--{% endfor %}-->
     <!--</tbody>-->
        <!--</table>-->
  <!--</div>-->
</section>
</div>
</div>
<div style="margin-left:30px; margin-bottom:30px;"><a class="btn btn-danger btn-sm" href='/create_pdf'>Create PDF</a></div>

    {%endblock%}